<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../css/homepage.css">
  <title>Slide Puzzle Game</title>
</head>

<body>
  <h1 class="title">Slide Puzzle</h1>
  <br>
  <div class="gallery">
    <div class="container cr1">
      <a href="../../games/coffee/coffee.html">
        <img class="photo1" src="../../games/full_pictures/coffee.jpg" alt="קפה">
      </a>
      <div class="content ct1">
        <h1>Coffee</h1>
      </div>
    </div>

    <div class="container cr2">
      <a href="../../games/dogtwo/dogtwo.html">
        <img class="photo2" src="../../games/full_pictures/dog%20two.jpg" alt="כלב זאב">
      </a>
      <div class="content ct2">
        <h1>Siberian Husky</h1>
      </div>
    </div>

    <div class="container cr3">
      <a href="../../games/garden/garden.html">
        <img class="photo3" src="../../games/full_pictures/garden.jpg" alt="גינה">
      </a>
      <div class="content ct3">
        <h1>Garden</h1>
      </div>
    </div>

    <div class="container cr4">
      <a href="../../games/HotAirBallon/HotAirBallon.html">
        <img class="photo4" src="../../games/full_pictures/HotAirBalloon.jpg" alt="כדור פורח">
      </a>
      <div class="content ct4">
        <h1>Hot Air Balloon</h1>
      </div>
    </div>

    <div class="container cr5">
      <a href="../../games/pariz/pariz.html">
        <img class="photo5" src="../../games/full_pictures/pariz.jpg" alt="פריז">
      </a>
      <div class="content ct5">
        <h1>Pariz</h1>
      </div>
    </div>

    <div class="container cr6">
      <a href="../../games/tower/tower.html">
        <img class="photo6" src="../../games/full_pictures/tower.jpg" alt="מגדל">
      </a>
      <div class="content ct6">
        <h1>Tower</h1>
      </div>
    </div>

    <div class="container cr7">
      <a href="../../games/Penguin/Penguin.html">
        <img class="photo7" src="../../games/full_pictures/Penguin.jpg" alt="פנגווין">
      </a>
      <div class="content ct7">
        <h1>Penguin</h1>
      </div>
    </div>

    <div class="container cr8">
      <a href="../../games/dog/dog.html">
        <img class="photo8" src="../../games/full_pictures/dog.jpg" alt="כלב">
      </a>
      <div class="content ct8">
        <h1>Dog</h1>
      </div>
    </div>
  </div>

  <script>
    (function () {
      function getScores() {
        try {
          return JSON.parse(localStorage.getItem('slidePuzzleScores') || '{}');
        } catch (e) {
          return {};
        }
      }

      var email = localStorage.getItem('slidePuzzleUser');
      var avatar = document.getElementById('userAvatar');
      var nameEl = document.getElementById('userName');
      var scoreEl = document.getElementById('userScore');
      var connectLink = document.getElementById('connectLink');

      if (!avatar || !nameEl) return;

      if (email) {
        var scores = getScores();
        var total = scores[email] || 0;
        var display = email;

        try {
          var users = JSON.parse(localStorage.getItem('gameuser') || '[]');
          var u = users.find(function (x) {
            return x.email === email;
          });
          if (u && u.name) display = (u.name.split(' ')[0] || email);
        } catch (e) { }

        avatar.textContent = (display.charAt(0) || '?').toUpperCase();
        nameEl.textContent = display;
        scoreEl.textContent = total + ' pts';
        connectLink.style.display = 'none';

        if (!document.getElementById('logoutLink')) {
          var logout = document.createElement('a');
          logout.id = 'logoutLink';
          logout.href = '#';
          logout.textContent = 'Logout';
          logout.style.color = '#fff';
          logout.style.marginLeft = '8px';
          logout.style.textDecoration = 'underline';
          logout.addEventListener('click', function (e) {
            e.preventDefault();
            localStorage.removeItem('slidePuzzleUser');
            location.reload();
          });
          document.getElementById('siteHeader').appendChild(logout);
        }

      } else {
        avatar.textContent = '?';
        nameEl.textContent = 'Not connected';
        scoreEl.textContent = '';
        connectLink.style.display = 'inline-block';
      }
    })();
  </script>
</body>

</html>
